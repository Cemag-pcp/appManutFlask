{% extends "user/layout.html" %}
{% block body %}

<div style="display: flex; justify-content: space-between;align-items: center;"><a id='botao_voltar' href="/index" style="top: 5%;left:5%;transform: translate(0%,150%);"><i class="fa-solid fa-arrow-left"></i>Voltar</a></div>
<div id = 'edicao' class = 'card card-body'>
<div class="row">
    <div class = 'col offset'>
        <form action="/update/{{ordem[10]}}" method="POST">
            <div class="form-group">
                <label for="setor">Setor:</label>
                <input type="text" name="setor" value="{{ordem[1]}}" class="form-control" readonly="readonly">
            </div>
            <div class="form-group">
                <label for="maquina">Máquina ou Local:</label>
                <input type="text" name="maquina" value="{{ordem[2]}}" class="form-control" readonly="readonly">
            </div>
            <div class="form-group">
                <label for="problema">Descrição do usuário:</label>
                <textarea id="problema" class="form-control" name="problema" rows="5" cols="41" required readonly="readonly">{{ordem[5]}}</textarea >
            </div>
            <div class="form-group" style="width: 530px;"> 
                <label for="operador">Operadores</label>
                <select class="form-control form-control" id="operador" name="operador" multiple required>
                    <option value="123 - Ryan">123 - Ryan</option>
                    <option value="456 - Davi">456 - Davi</option>
                    <option value="789 - Outro">789 - Outro</option>
                </select>
            </div>
            {% if tipo_manutencao == '' %}
            <div class="form-group" style="width: 355px;"> 
                <label for="operador">Tipo de manutenção</label>
                <select class="form-control form-control" name="tipo_manutencao">
                    <option value="" selected disabled hidden></option>  
                    <option value="Hidráulica">Hidráulica</option>
                    <option value="Elétrica">Elétrica</option>
                    <option value="Projeto">Projeto</option>
                    <option value="Predial">Predial</option>
                    <option value="Preditiva">Preditiva</option>   
                </select>               
            </div>
            {% else %}
            <div class="form-group">
                <label for="operador">Tipo de manutenção</label>
                <input type='text' name="tipo_manutencao" value="{{ tipo_manutencao }}" class="form-control" readonly="readonly">
            </div>
            {% endif %}
            
            <div class="form-group">
                <label for="statusLista">Data e hora</label>
                <input id="data_edit" type="text" name="datetimes" />
            </div>
 
    </div>
    <div class = 'col-md-12 offset'>
            <div class="form-group">
                <label for="risco">Risco</label>    
                <input type="text" name="risco" value="{{ordem[3]}}" class="form-control" readonly="readonly"> 
            </div>
            <div class="form-group">
                <label for="n_ordem">Número da execução:</label>
                <input type="text" name="n_ordem" value="{{ordem[11] + 1}}" class="form-control" readonly="readonly">
            </div>
            <div class="form-group">
                <label for="descmanutencao">Observação da manutenção:</label>
                <textarea id="descmanutencao" class="form-control" name="descmanutencao" rows="5" cols="41"></textarea>
            </div>
            <div class="form-group">        
                <label for="statusLista">Status</label>
                <select class="form-control form-control" id="statusLista" name="statusLista">
                    {% for opcao in opcoes %}
                    <option value="{{ opcao }}">{{ opcao }}</option>
                    {% endfor %}
                </select>
            </div>
            <br>
            <div class="form-group">
            <button id = 'salvar_edicao' type="submit" class="btn btn-primary btn-block">
                Salvar
            </button>
            </div>
        </form>
    </div>
</div>
</div>




<script>
$(function() {
    $('input[name="datetimes"]').daterangepicker({
      timePicker: true,
      startDate: moment().startOf('hour'),
      endDate: moment().startOf('hour').add(32, 'hour'),
      locale: {
        format: 'DD/MM/YY hh:mm A'
      }
    });
  
    $('input[name="datetimes"]').on('apply.daterangepicker', function(ev, picker) {
      var startDate = picker.startDate;
      var endDate = picker.endDate;
  
      if (endDate.isBefore(startDate)) {
        alert("A data final não pode ser menor que a data inicial");
        picker.setEndDate(startDate);
      }
    });
  });
</script>  

{% endblock %}